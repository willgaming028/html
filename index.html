<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phone Update</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0f0f1a 100%);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            overflow: hidden;
        }

        .scene {
            position: relative;
            width: 400px;
            height: 800px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .phone-container {
            position: relative;
            z-index: 10;
        }

        .phone {
            width: 300px;
            height: 620px;
            background: linear-gradient(145deg, #2a2a2a 0%, #1a1a1a 50%, #0a0a0a 100%);
            border-radius: 45px;
            padding: 10px;
            box-shadow: 
                0 0 0 2px #3a3a3a,
                0 0 0 4px #1a1a1a,
                0 25px 60px rgba(0, 0, 0, 0.6),
                inset 0 1px 1px rgba(255, 255, 255, 0.1);
            position: relative;
            transition: filter 1s ease;
        }

        .phone.heating {
            animation: heatUp 2s ease-in-out forwards;
        }

        .phone.melting {
            animation: meltPhone 4s ease-in forwards;
        }

        @keyframes heatUp {
            0% { filter: brightness(1) saturate(1); }
            100% { filter: brightness(1.1) saturate(1.2); }
        }

        @keyframes meltPhone {
            0% {
                transform: translateY(0) scaleX(1) scaleY(1);
                border-radius: 45px;
            }
            15% {
                transform: translateY(5px) scaleX(1.01) scaleY(0.99);
            }
            30% {
                transform: translateY(20px) scaleX(1.03) scaleY(0.97);
                border-radius: 45px 45px 55px 55px;
            }
            50% {
                transform: translateY(60px) scaleX(1.1) scaleY(0.9);
                border-radius: 50px 50px 70px 70px;
            }
            70% {
                transform: translateY(120px) scaleX(1.25) scaleY(0.7);
                border-radius: 60px 60px 100px 100px;
            }
            85% {
                transform: translateY(200px) scaleX(1.5) scaleY(0.4);
                border-radius: 80px 80px 150px 150px;
            }
            100% {
                transform: translateY(300px) scaleX(2) scaleY(0.15);
                border-radius: 100px 100px 200px 200px;
                opacity: 0;
            }
        }

        /* Lava glow overlay */
        .lava-glow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 45px;
            pointer-events: none;
            opacity: 0;
            background: radial-gradient(ellipse at center, 
                rgba(255, 100, 0, 0.4) 0%, 
                rgba(255, 50, 0, 0.2) 40%, 
                transparent 70%);
            z-index: 50;
            transition: opacity 0.5s ease;
        }

        .lava-glow.active {
            opacity: 1;
            animation: pulseGlow 0.5s ease-in-out infinite alternate;
        }

        @keyframes pulseGlow {
            0% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* Lava texture overlay */
        .lava-texture {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 45px;
            pointer-events: none;
            opacity: 0;
            z-index: 45;
            background: 
                radial-gradient(ellipse at 30% 20%, rgba(255, 200, 50, 0.8) 0%, transparent 30%),
                radial-gradient(ellipse at 70% 40%, rgba(255, 150, 0, 0.7) 0%, transparent 25%),
                radial-gradient(ellipse at 50% 60%, rgba(255, 100, 0, 0.9) 0%, transparent 35%),
                radial-gradient(ellipse at 20% 80%, rgba(255, 80, 0, 0.6) 0%, transparent 30%),
                radial-gradient(ellipse at 80% 70%, rgba(255, 120, 0, 0.7) 0%, transparent 28%),
                linear-gradient(180deg, rgba(255, 80, 0, 0.8) 0%, rgba(200, 40, 0, 0.9) 100%);
            mix-blend-mode: screen;
        }

        .lava-texture.active {
            animation: lavaFlow 3s ease-in forwards;
        }

        @keyframes lavaFlow {
            0% { opacity: 0; }
            30% { opacity: 0.6; }
            100% { opacity: 1; }
        }

        .phone::before {
            content: '';
            position: absolute;
            top: 16px;
            left: 50%;
            transform: translateX(-50%);
            width: 90px;
            height: 28px;
            background: linear-gradient(180deg, #0a0a0a 0%, #151515 100%);
            border-radius: 20px;
            z-index: 10;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
        }

        .phone::after {
            content: '';
            position: absolute;
            top: 24px;
            left: calc(50% + 25px);
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #1a2a3a 0%, #0a1520 100%);
            border-radius: 50%;
            z-index: 11;
            box-shadow: 
                inset 0 0 3px rgba(0, 150, 255, 0.3),
                0 0 2px rgba(0,0,0,0.5);
        }

        .screen {
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #0d1b2a 0%, #1b263b 50%, #0d1b2a 100%);
            border-radius: 38px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 60px 25px 40px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.5);
        }

        /* Realistic glass crack layer */
        .crack-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            border-radius: 38px;
            overflow: hidden;
        }

        .crack {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.15s ease;
        }

        .crack.visible {
            opacity: 1;
        }

        .crack svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 1px rgba(255,255,255,0.8));
        }

        .crack-main {
            stroke: rgba(255, 255, 255, 0.9);
            stroke-width: 2;
            fill: none;
        }

        .crack-branch {
            stroke: rgba(255, 255, 255, 0.7);
            stroke-width: 1.2;
            fill: none;
        }

        .crack-fine {
            stroke: rgba(255, 255, 255, 0.5);
            stroke-width: 0.8;
            fill: none;
        }

        .crack-micro {
            stroke: rgba(200, 200, 200, 0.4);
            stroke-width: 0.5;
            fill: none;
        }

        /* Glass shatter effect */
        .glass-shatter {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(45deg, transparent 49%, rgba(255,255,255,0.03) 50%, transparent 51%),
                linear-gradient(-45deg, transparent 49%, rgba(255,255,255,0.03) 50%, transparent 51%);
            background-size: 20px 20px;
            opacity: 0;
            z-index: 99;
            pointer-events: none;
        }

        .glass-shatter.active {
            opacity: 1;
        }

        /* Heat shimmer effect */
        .heat-shimmer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 60;
            opacity: 0;
        }

        .heat-shimmer.active {
            opacity: 1;
            animation: shimmer 0.3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(1px) translateY(-1px); }
            75% { transform: translateX(-1px) translateY(1px); }
        }

        /* Lava drips */
        .lava-drip-container {
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 200px;
            pointer-events: none;
            z-index: 200;
            overflow: visible;
        }

        .lava-drip {
            position: absolute;
            width: 15px;
            border-radius: 50% 50% 50% 50%;
            background: linear-gradient(180deg, 
                #ffdd00 0%, 
                #ff9500 20%, 
                #ff5500 50%, 
                #cc2200 80%, 
                #991100 100%);
            box-shadow: 
                0 0 10px #ff5500,
                0 0 20px #ff3300,
                0 0 30px rgba(255, 50, 0, 0.5),
                inset 0 -5px 10px rgba(0,0,0,0.3);
            opacity: 0;
            transform-origin: top center;
        }

        .lava-drip.active {
            animation: dripFall 2s ease-in forwards;
        }

        @keyframes dripFall {
            0% {
                height: 0;
                opacity: 0;
                transform: translateY(0);
            }
            10% {
                height: 20px;
                opacity: 1;
            }
            30% {
                height: 40px;
            }
            50% {
                height: 30px;
                transform: translateY(50px);
            }
            70% {
                height: 25px;
                transform: translateY(100px);
            }
            100% {
                height: 15px;
                transform: translateY(180px);
                opacity: 0;
            }
        }

        /* Lava pool */
        .lava-pool {
            position: absolute;
            bottom: -150px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 30px;
            background: radial-gradient(ellipse at center,
                #ff6600 0%,
                #ff4400 30%,
                #cc2200 60%,
                #661100 80%,
                transparent 100%);
            border-radius: 50%;
            opacity: 0;
            box-shadow: 
                0 0 30px #ff4400,
                0 0 60px #ff2200,
                0 0 90px rgba(255, 50, 0, 0.4);
            z-index: 5;
        }

        .lava-pool.active {
            animation: poolSpread 3s ease-out forwards;
        }

        @keyframes poolSpread {
            0% {
                width: 100px;
                opacity: 0;
            }
            20% {
                opacity: 0.8;
            }
            100% {
                width: 500px;
                height: 50px;
                opacity: 1;
            }
        }

        /* Lava pool surface animation */
        .lava-pool-surface {
            position: absolute;
            bottom: -150px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 30px;
            border-radius: 50%;
            opacity: 0;
            z-index: 6;
            overflow: hidden;
        }

        .lava-pool-surface.active {
            animation: poolSpread 3s ease-out forwards;
        }

        .lava-pool-surface::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 100%;
            background: 
                radial-gradient(ellipse at 20% 50%, rgba(255, 200, 50, 0.6) 0%, transparent 40%),
                radial-gradient(ellipse at 60% 30%, rgba(255, 180, 0, 0.5) 0%, transparent 35%),
                radial-gradient(ellipse at 80% 60%, rgba(255, 220, 100, 0.7) 0%, transparent 30%);
            animation: flowSurface 2s linear infinite;
        }

        @keyframes flowSurface {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* Ember particles */
        .ember-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 150;
            overflow: visible;
        }

        .ember {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffcc00;
            border-radius: 50%;
            box-shadow: 0 0 6px #ff6600, 0 0 12px #ff3300;
            opacity: 0;
        }

        .ember.active {
            animation: emberFloat 1.5s ease-out forwards;
        }

        @keyframes emberFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) translateX(var(--drift)) scale(0);
            }
        }

        /* Smoke */
        .smoke-container {
            position: absolute;
            top: -50px;
            left: 0;
            width: 100%;
            height: 200px;
            pointer-events: none;
            z-index: 140;
            overflow: visible;
        }

        .smoke {
            position: absolute;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(80, 80, 80, 0.4) 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
        }

        .smoke.active {
            animation: smokeRise 3s ease-out forwards;
        }

        @keyframes smokeRise {
            0% {
                opacity: 0;
                transform: translateY(100px) scale(0.5);
            }
            20% {
                opacity: 0.6;
            }
            100% {
                opacity: 0;
                transform: translateY(-150px) scale(2);
            }
        }

        .update-icon {
            width: 80px;
            height: 80px;
            margin-bottom: 25px;
            position: relative;
            z-index: 10;
        }

        .update-icon svg {
            width: 100%;
            height: 100%;
            fill: none;
            stroke: #4cc9f0;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: stroke 0.5s ease;
        }

        .update-icon.spinning svg {
            animation: spin 1.5s linear infinite;
        }

        .update-icon.warning svg {
            stroke: #ff6b6b;
            animation: shake 0.3s ease-in-out infinite;
        }

        .update-icon.critical svg {
            stroke: #ff3300;
            filter: drop-shadow(0 0 10px #ff3300);
            animation: shake 0.15s ease-in-out infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-3px) rotate(-2deg); }
            75% { transform: translateX(3px) rotate(2deg); }
        }

        .title {
            color: #fff;
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 10px;
            text-align: center;
            transition: color 0.3s ease, text-shadow 0.3s ease;
            z-index: 10;
        }

        .title.warning {
            color: #ff6b6b;
        }

        .title.critical {
            color: #ff3300;
            text-shadow: 0 0 20px #ff3300;
            animation: glitchText 0.2s ease-in-out infinite;
        }

        @keyframes glitchText {
            0%, 100% { transform: translate(0); opacity: 1; }
            20% { transform: translate(-2px, 1px); }
            40% { transform: translate(2px, -1px); opacity: 0.8; }
            60% { transform: translate(-1px, -1px); }
            80% { transform: translate(1px, 1px); opacity: 0.9; }
        }

        .subtitle {
            color: #8b9cb5;
            font-size: 14px;
            text-align: center;
            margin-bottom: 40px;
            line-height: 1.5;
            z-index: 10;
            transition: color 0.3s ease;
        }

        .update-btn {
            background: linear-gradient(135deg, #4cc9f0 0%, #4361ee 100%);
            color: white;
            border: none;
            padding: 16px 50px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(76, 201, 240, 0.3);
            z-index: 10;
        }

        .update-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(76, 201, 240, 0.4);
        }

        .progress-container {
            width: 100%;
            display: none;
            flex-direction: column;
            align-items: center;
            z-index: 10;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #4cc9f0, #4361ee, #7209b7);
            background-size: 200% 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
            animation: shimmerBar 2s linear infinite;
        }

        .progress-fill.warning {
            background: linear-gradient(90deg, #ff9500, #ff5500, #ff3300);
            background-size: 200% 100%;
        }

        .progress-fill.critical {
            background: linear-gradient(90deg, #ff5500, #ff0000, #cc0000);
            background-size: 200% 100%;
            box-shadow: 0 0 15px #ff3300;
        }

        @keyframes shimmerBar {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .progress-text {
            color: #4cc9f0;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s ease;
            z-index: 10;
        }

        .progress-text.warning {
            color: #ff6b6b;
        }

        .progress-text.critical {
            color: #ff3300;
            text-shadow: 0 0 10px #ff3300;
        }

        .status-text {
            color: #8b9cb5;
            font-size: 13px;
            margin-top: 8px;
            z-index: 10;
            transition: color 0.3s ease;
        }

        .home-indicator {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 5px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            z-index: 10;
        }

        /* Crack glow for heated state */
        .crack.heated .crack-main,
        .crack.heated .crack-branch {
            stroke: rgba(255, 150, 50, 0.9);
            filter: drop-shadow(0 0 3px #ff6600) drop-shadow(0 0 6px #ff3300);
        }

        .crack.heated .crack-fine,
        .crack.heated .crack-micro {
            stroke: rgba(255, 100, 0, 0.7);
        }
    </style>
</head>
<body>
    <div class="scene">
        <div class="phone-container">
            <div class="phone" id="phone">
                <div class="lava-glow" id="lavaGlow"></div>
                <div class="lava-texture" id="lavaTexture"></div>
                <div class="screen">
                    <div class="crack-layer" id="crackLayer"></div>
                    <div class="glass-shatter" id="glassShatter"></div>
                    <div class="heat-shimmer" id="heatShimmer"></div>

                    <div class="update-icon" id="updateIcon">
                        <svg viewBox="0 0 24 24">
                            <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/>
                            <path d="M21 3v5h-5"/>
                        </svg>
                    </div>

                    <h1 class="title" id="title">Software Update</h1>
                    <p class="subtitle" id="subtitle">A new update is available.<br>Tap below to install.</p>

                    <button class="update-btn" id="updateBtn" onclick="startUpdate()">Update Now</button>

                    <div class="progress-container" id="progressContainer">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <span class="progress-text" id="progressText">0%</span>
                        <span class="status-text" id="statusText">Downloading update...</span>
                    </div>

                    <div class="home-indicator"></div>
                </div>
                
                <div class="lava-drip-container" id="lavaDripContainer"></div>
                <div class="ember-container" id="emberContainer"></div>
                <div class="smoke-container" id="smokeContainer"></div>
            </div>
        </div>
        <div class="lava-pool" id="lavaPool"></div>
        <div class="lava-pool-surface" id="lavaPoolSurface"></div>
    </div>

    <script>
        // Realistic crack patterns with main lines, branches, and micro-fractures
        const crackPatterns = [
            // Impact crack - top left
            `<svg viewBox="0 0 280 600">
                <path class="crack-main" d="M5,80 Q20,90 35,85 T65,95 T95,88 T130,100"/>
                <path class="crack-branch" d="M35,85 Q40,70 55,60 T75,45"/>
                <path class="crack-branch" d="M65,95 Q70,110 85,125 T95,145"/>
                <path class="crack-fine" d="M55,60 L48,52 L52,42"/>
                <path class="crack-fine" d="M95,88 L105,78 L115,82"/>
                <path class="crack-micro" d="M75,45 L72,38"/>
                <path class="crack-micro" d="M85,125 L92,130"/>
            </svg>`,
            
            // Radiating crack - top right
            `<svg viewBox="0 0 280 600">
                <path class="crack-main" d="M275,120 Q255,115 240,125 T205,120 T175,135"/>
                <path class="crack-branch" d="M240,125 Q235,140 225,155 T220,180"/>
                <path class="crack-branch" d="M205,120 Q200,105 190,90 T175,70"/>
                <path class="crack-fine" d="M225,155 L235,165 L230,178"/>
                <path class="crack-fine" d="M190,90 L182,85 L178,75"/>
                <path class="crack-micro" d="M220,180 L225,188"/>
                <path class="crack-micro" d="M175,70 L170,62"/>
            </svg>`,
            
            // Spider web crack - center left
            `<svg viewBox="0 0 280 600">
                <path class="crack-main" d="M0,280 Q25,275 50,285 T100,278 T140,290"/>
                <path class="crack-branch" d="M50,285 Q55,265 65,250 T80,225"/>
                <path class="crack-branch" d="M50,285 Q60,305 75,320 T90,345"/>
                <path class="crack-branch" d="M100,278 Q110,265 125,255"/>
                <path class="crack-fine" d="M65,250 L58,242 L62,230"/>
                <path class="crack-fine" d="M75,320 L68,328 L72,340"/>
                <path class="crack-micro" d="M80,225 L85,218"/>
                <path class="crack-micro" d="M90,345 L95,355"/>
            </svg>`,
            
            // Branching crack - center
            `<svg viewBox="0 0 280 600">
                <path class="crack-main" d="M140,220 Q145,250 138,280 T145,340 T140,400"/>
                <path class="crack-branch" d="M138,280 Q120,290 100,285 T65,295"/>
                <path class="crack-branch" d="M145,340 Q165,345 185,340 T220,350"/>
                <path class="crack-fine" d="M100,285 L90,275 L78,280"/>
                <path class="crack-fine" d="M185,340 L195,330 L210,335"/>
                <path class="crack-micro" d="M65,295 L55,292"/>
                <path class="crack-micro" d="M220,350 L232,348"/>
            </svg>`,
            
            // Diagonal crack - bottom right
            `<svg viewBox="0 0 280 600">
                <path class="crack-main" d="M280,420 Q260,430 245,425 T210,440 T175,435 T145,450"/>
                <path class="crack-branch" d="M245,425 Q250,445 260,465 T265,495"/>
                <path class="crack-branch" d="M210,440 Q205,420 195,400"/>
                <path class="crack-fine" d="M260,465 L268,472 L262,485"/>
                <path class="crack-fine" d="M195,400 L188,392 L192,380"/>
                <path class="crack-micro" d="M265,495 L270,505"/>
                <path class="crack-micro" d="M192,380 L188,370"/>
            </svg>`,
            
            // Complex web - bottom left
            `<svg viewBox="0 0 280 600">
                <path class="crack-main" d="M0,480 Q30,475 55,485 T110,478 T150,490"/>
                <path class="crack-branch" d="M55,485 Q50,505 45,525 T50,555"/>
                <path class="crack-branch" d="M110,478 Q115,460 125,445 T140,420"/>
                <path class="crack-branch" d="M55,485 Q70,495 85,505"/>
                <path class="crack-fine" d="M45,525 L38,535 L42,550"/>
                <path class="crack-fine" d="M125,445 L135,438 L130,425"/>
                <path class="crack-micro" d="M50,555 L48,568"/>
                <path class="crack-micro" d="M140,420 L145,408"/>
            </svg>`,
            
            // Shatter pattern - spreads across
            `<svg viewBox="0 0 280 600">
                <path class="crack-main" d="M140,300 L80,250 L40,200"/>
                <path class="crack-main" d="M140,300 L200,250 L240,200"/>
                <path class="crack-main" d="M140,300 L80,350 L40,400"/>
                <path class="crack-main" d="M140,300 L200,350 L240,400"/>
                <path class="crack-branch" d="M80,250 L60,280 L40,300"/>
                <path class="crack-branch" d="M200,250 L220,280 L240,300"/>
                <path class="crack-branch" d="M80,350 L60,320"/>
                <path class="crack-branch" d="M200,350 L220,320"/>
                <path class="crack-fine" d="M40,200 L25,180"/>
                <path class="crack-fine" d="M240,200 L255,180"/>
                <path class="crack-fine" d="M40,400 L25,420"/>
                <path class="crack-fine" d="M240,400 L255,420"/>
            </svg>`,
            
            // Final shatter - complete web
            `<svg viewBox="0 0 280 600">
                <path class="crack-main" d="M140,300 L140,150 L140,50"/>
                <path class="crack-main" d="M140,300 L140,450 L140,550"/>
                <path class="crack-main" d="M140,300 L50,300 L0,300"/>
                <path class="crack-main" d="M140,300 L230,300 L280,300"/>
                <path class="crack-branch" d="M140,150 L100,120 L60,100"/>
                <path class="crack-branch" d="M140,150 L180,120 L220,100"/>
                <path class="crack-branch" d="M140,450 L100,480 L60,500"/>
                <path class="crack-branch" d="M140,450 L180,480 L220,500"/>
                <path class="crack-fine" d="M50,300 L40,260 L30,220"/>
                <path class="crack-fine" d="M50,300 L40,340 L30,380"/>
                <path class="crack-fine" d="M230,300 L240,260 L250,220"/>
                <path class="crack-fine" d="M230,300 L240,340 L250,380"/>
                <path class="crack-micro" d="M100,120 L95,100"/>
                <path class="crack-micro" d="M180,120 L185,100"/>
                <path class="crack-micro" d="M100,480 L95,500"/>
                <path class="crack-micro" d="M180,480 L185,500"/>
            </svg>`
        ];

        let cracksAdded = 0;
        let lavaDripInterval;
        let emberInterval;
        let smokeInterval;

        function addCrack(heated = false) {
            if (cracksAdded >= crackPatterns.length) return;
            
            const crackLayer = document.getElementById('crackLayer');
            const crackDiv = document.createElement('div');
            crackDiv.className = 'crack' + (heated ? ' heated' : '');
            crackDiv.innerHTML = crackPatterns[cracksAdded];
            crackLayer.appendChild(crackDiv);
            
            setTimeout(() => crackDiv.classList.add('visible'), 50);
            cracksAdded++;
        }

        function heatAllCracks() {
            document.querySelectorAll('.crack').forEach(crack => {
                crack.classList.add('heated');
            });
        }

        function createLavaDrip() {
            const container = document.getElementById('lavaDripContainer');
            const drip = document.createElement('div');
            drip.className = 'lava-drip';
            drip.style.left = (10 + Math.random() * 80) + '%';
            drip.style.animationDuration = (1.5 + Math.random() * 1) + 's';
            container.appendChild(drip);
            
            setTimeout(() => drip.classList.add('active'), 10);
            setTimeout(() => drip.remove(), 3000);
        }

        function createEmber() {
            const container = document.getElementById('emberContainer');
            const ember = document.createElement('div');
            ember.className = 'ember';
            ember.style.left = (10 + Math.random() * 80) + '%';
            ember.style.top = (20 + Math.random() * 60) + '%';
            ember.style.setProperty('--drift', (Math.random() * 60 - 30) + 'px');
            ember.style.animationDuration = (1 + Math.random() * 1) + 's';
            container.appendChild(ember);
            
            setTimeout(() => ember.classList.add('active'), 10);
            setTimeout(() => ember.remove(), 2000);
        }

        function createSmoke() {
            const container = document.getElementById('smokeContainer');
            const smoke = document.createElement('div');
            smoke.className = 'smoke';
            smoke.style.left = (10 + Math.random() * 60) + '%';
            smoke.style.animationDuration = (2.5 + Math.random() * 1) + 's';
            container.appendChild(smoke);
            
            setTimeout(() => smoke.classList.add('active'), 10);
            setTimeout(() => smoke.remove(), 4000);
        }

        function startLavaEffects() {
            lavaDripInterval = setInterval(createLavaDrip, 200);
            emberInterval = setInterval(createEmber, 100);
            smokeInterval = setInterval(createSmoke, 300);
        }

        function stopEffects() {
            clearInterval(lavaDripInterval);
            clearInterval(emberInterval);
            clearInterval(smokeInterval);
        }

        function startUpdate() {
            const btn = document.getElementById('updateBtn');
            const progressContainer = document.getElementById('progressContainer');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const statusText = document.getElementById('statusText');
            const updateIcon = document.getElementById('updateIcon');
            const title = document.getElementById('title');
            const subtitle = document.getElementById('subtitle');
            const phone = document.getElementById('phone');
            const lavaPool = document.getElementById('lavaPool');
            const lavaPoolSurface = document.getElementById('lavaPoolSurface');
            const lavaGlow = document.getElementById('lavaGlow');
            const lavaTexture = document.getElementById('lavaTexture');
            const heatShimmer = document.getElementById('heatShimmer');
            const glassShatter = document.getElementById('glassShatter');

            btn.style.display = 'none';
            progressContainer.style.display = 'flex';
            updateIcon.classList.add('spinning');
            subtitle.textContent = 'Please wait while updating...';

            let progress = 0;
            const statuses = [
                { at: 0, text: 'Downloading update...' },
                { at: 15, text: 'Installing components...' },
                { at: 30, text: 'âš ï¸ Warning: CPU temperature rising' },
                { at: 45, text: 'âš ï¸ Thermal throttling active' },
                { at: 55, text: 'ðŸ”¥ DANGER: Overheating detected!' },
                { at: 70, text: 'ðŸ”¥ CRITICAL: Thermal runaway!' },
                { at: 85, text: 'â˜ ï¸ FATAL: Core meltdown imminent!' },
                { at: 95, text: 'ðŸ’€ CATASTROPHIC FAILURE ðŸ’€' }
            ];

            const crackThresholds = [12, 25, 38, 48, 58, 68, 80, 92];
            let currentCrackIndex = 0;

            const interval = setInterval(() => {
                progress += Math.random() * 1.2 + 0.4;
                
                // Add cracks
                while (currentCrackIndex < crackThresholds.length && 
                       progress >= crackThresholds[currentCrackIndex]) {
                    const heated = progress >= 55;
                    addCrack(heated);
                    currentCrackIndex++;
                }

                // Warning phase (30-55%)
                if (progress >= 30 && progress < 55) {
                    progressFill.classList.add('warning');
                    progressText.classList.add('warning');
                    title.classList.add('warning');
                    updateIcon.classList.remove('spinning');
                    updateIcon.classList.add('warning');
                }

                // Critical phase (55%+)
                if (progress >= 55) {
                    progressFill.classList.remove('warning');
                    progressFill.classList.add('critical');
                    progressText.classList.remove('warning');
                    progressText.classList.add('critical');
                    title.classList.remove('warning');
                    title.classList.add('critical');
                    updateIcon.classList.remove('warning');
                    updateIcon.classList.add('critical');
                    heatShimmer.classList.add('active');
                    heatAllCracks();
                }

                // Pre-melt phase (70%+)
                if (progress >= 70) {
                    phone.classList.add('heating');
                    lavaGlow.classList.add('active');
                    glassShatter.classList.add('active');
                }

                // Lava starting (85%+)
                if (progress >= 85 && !lavaDripInterval) {
                    startLavaEffects();
                }
                
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    
                    title.textContent = 'â˜ ï¸ MELTDOWN â˜ ï¸';
                    subtitle.textContent = '';
                    statusText.textContent = '';
                    
                    // Full melt sequence
                    setTimeout(() => {
                        lavaTexture.classList.add('active');
                        phone.classList.add('melting');
                        lavaPool.classList.add('active');
                        lavaPoolSurface.classList.add('active');
                        
                        // Stop effects after phone melts
                        setTimeout(() => {
                            stopEffects();
                        }, 4000);
                    }, 500);
                }

                progressFill.style.width = progress + '%';
                progressText.textContent = Math.floor(progress) + '%';

                for (let i = statuses.length - 1; i >= 0; i--) {
                    if (progress >= statuses[i].at) {
                        statusText.textContent = statuses[i].text;
                        break;
                    }
                }
            }, 80);
        }
    </script>
</body>
</html>
